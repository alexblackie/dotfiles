# ------------------------------------------------------------------------------
# Aliases & custom functions
# ------------------------------------------------------------------------------
alias tm="tmux"
alias tma="tmux attach"
alias yolo="git push -f origin"

alias be="bundle exec"

serve() {
	ruby -run -e httpd . -p ${1:-3000}
}

refactor() {
	# Takes two args:
	#	 $1 = current
	#	 $2 = wanted
	# ex, to change "user" to "account": `refactor user account`

	ag -l $1 | xargs sed -i "s/$1/$2/g"
}

gitclean() {
	# Deletes all merged branches locally.
	git branch --merged | cut -f3 -d" " | xargs git branch -d
}

# @param $1 Github PR label name
# @param $2 Git remote name (default: origin)
git-mergelabel() {
	if [ "$1x" = "x" ] ; then
		echo "Please provide label as first argument."
		exit 1
	fi

	REMOTE="${2:-origin}"
	LABEL="$1"

	hub pr list -f "$REMOTE/%HΩ%L%n" | \
		awk -F"Ω" "{ if (\$2 ~ /$LABEL/) { print \$1 }}" | \
		xargs git merge --no-ff
}

# ------------------------------------------------------------------------------
# Libraries/Imports
# ------------------------------------------------------------------------------
if [ -f ~/.env ]; then
	source ~/.env
fi

if [ -d "$HOME/.asdf" ] ; then
	source "$HOME/.asdf/asdf.sh"
fi

# ------------------------------------------------------------------------------
# Environment
# ------------------------------------------------------------------------------
export TERM="screen-256color"
export EDITOR="vim"
export PATH="$HOME/bin:$HOME/.gem_local/bin:$PATH"
